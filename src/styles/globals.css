@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg: #0b1220;
  --card: #0f172a;
  --muted: #94a3b8;
}
html, body {
  height: 100%;
  background: linear-gradient(180deg, #0b1220 0%, #0d1630 100%);
  color: white;
}
a { @apply text-brand-300 hover:text-brand-200; }
.container { @apply max-w-6xl mx-auto px-4; }
.card {
  @apply rounded-2xl p-5 shadow-lg bg-slate-900/70 border border-slate-800;
}
.btn {
  @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 bg-brand-600 hover:bg-brand-700 transition;
}
.chip {
  @apply text-xs px-2 py-1 rounded-full bg-slate-800 border border-slate-700;
}

/* 响应式图形容器 */
.graph-container {
  @apply relative w-full;
  min-height: 200px;
}

/* 响应式文本 */
.responsive-text {
  @apply text-sm sm:text-base;
}

/* 移动端优化 */
@media (max-width: 768px) {
  .graph-container {
    min-height: 180px;
  }
  
  .card {
    @apply p-4;
  }
}

/* 平板端优化 */
@media (min-width: 768px) and (max-width: 1024px) {
  .graph-container {
    min-height: 250px;
  }
}

/* 桌面端优化 */
@media (min-width: 1024px) {
  .graph-container {
    min-height: 300px;
  }
}

/* 加载动画优化 */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.fade-in {
  animation: fadeIn 0.3s ease-out;
}

/* 高DPI屏幕优化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .graph-container canvas {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* 骨架屏加载动画 */
@keyframes shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

@keyframes pulse-glow {
  0%, 100% {
    opacity: 0.4;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

@keyframes skeleton-line-draw {
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.skeleton-graph {
  background: linear-gradient(
    90deg,
    rgba(15, 23, 42, 0.8) 0%,
    rgba(30, 41, 59, 0.8) 50%,
    rgba(15, 23, 42, 0.8) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 2s infinite;
}

.skeleton-node {
  @apply w-8 h-8 rounded-full;
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.3),
    rgba(99, 102, 241, 0.5)
  );
  animation: pulse-glow 1.5s ease-in-out infinite;
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
}

.skeleton-line {
  stroke: rgba(59, 130, 246, 0.2);
  stroke-dasharray: 10;
  animation: skeleton-line-draw 2s ease-in-out infinite;
}

/* 动画延迟类 */
.animation-delay-100 {
  animation-delay: 100ms;
}

.animation-delay-200 {
  animation-delay: 200ms;
}

.animation-delay-300 {
  animation-delay: 300ms;
}

.animation-delay-400 {
  animation-delay: 400ms;
}

/* 进度条动画 */
@keyframes progress-pulse {
  0%, 100% {
    box-shadow: 0 0 5px rgba(59, 130, 246, 0.3);
  }
  50% {
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.6);
  }
}

/* 优化的渐变背景 */
.gradient-shimmer {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  background-size: 200% 100%;
  animation: shimmer 2s infinite;
}

/* 懒加载优化 */
.lazy-load {
  content-visibility: auto;
  contain-intrinsic-size: auto 400px;
}

/* 性能提示 */
.will-change-transform {
  will-change: transform, opacity;
}

/* 移动端骨架屏优化 */
@media (max-width: 768px) {
  .skeleton-node {
    @apply w-6 h-6;
  }
  
  .skeleton-graph {
    padding: 1rem;
  }
}

/* ============================================
   卡片翻转动画和缓加载效果
   ============================================ */

/* 卡片容器 - 3D透视 */
.card-flip-container {
  position: relative;
  width: 100%;
  min-height: 320px;
  margin-bottom: 1rem;
  transition: transform 0.3s ease-out, opacity 0.3s ease-out;
}

/* 卡片内部容器 - 翻转效果 */
.card-flip-inner {
  position: relative;
  width: 100%;
  min-height: 320px;
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* 翻转状态 */
.card-flip-inner.flipped {
  transform: rotateY(180deg);
}

/* 翻转中添加阴影效果 */
.card-flip-inner.flipping {
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

/* 卡片面 - 通用样式 */
.card-flip-face {
  position: absolute;
  width: 100%;
  min-height: 320px;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform-style: preserve-3d;
}

/* 卡片正面 */
.card-flip-front {
  transform: rotateY(0deg);
  z-index: 2;
}

/* 卡片背面 */
.card-flip-back {
  transform: rotateY(180deg);
  @apply bg-slate-900/80;
}

/* 卡片可见性动画 - 缓加载效果 */
@keyframes cardSlideIn {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.card-hidden {
  opacity: 0;
  transform: translateY(30px) scale(0.95);
}

.card-visible {
  animation: cardSlideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* 按钮增强样式 */
.btn-primary {
  @apply bg-gradient-to-r from-brand-600 to-brand-500 hover:from-brand-700 hover:to-brand-600;
  @apply shadow-lg hover:shadow-xl transition-all duration-200;
  @apply transform hover:scale-105 active:scale-95;
}

.btn-secondary {
  @apply bg-slate-700 hover:bg-slate-600;
  @apply transition-all duration-200;
  @apply transform hover:scale-110 active:scale-95;
}

.btn-success {
  @apply bg-green-600 hover:bg-green-700 text-white;
  @apply transition-all duration-200;
  @apply transform hover:scale-105 active:scale-95;
}

.btn-warning {
  @apply bg-yellow-600 hover:bg-yellow-700 text-white;
  @apply transition-all duration-200;
  @apply transform hover:scale-105 active:scale-95;
}

.btn-danger {
  @apply bg-red-600 hover:bg-red-700 text-white;
  @apply transition-all duration-200;
  @apply transform hover:scale-105 active:scale-95;
}

.btn-icon {
  @apply inline-block transition-transform duration-200;
}

.btn:hover .btn-icon {
  transform: rotate(15deg);
}

.btn-primary:disabled,
.btn:disabled {
  @apply opacity-50 cursor-not-allowed;
  transform: none !important;
}

/* 芯片标签增强 */
.chip-category {
  @apply bg-brand-600/30 border-brand-500/50 text-brand-200;
  @apply font-semibold;
}

.chip-tag {
  @apply bg-slate-700/50 border-slate-600/50;
  @apply hover:bg-slate-600/50 transition-colors;
}

/* 收藏星标样式 */

/* 卡片内容区域 */
.card-content {
  @apply text-base leading-relaxed;
  max-height: 200px;
  overflow-y: auto;
}

/* 自定义滚动条 */
.card-content::-webkit-scrollbar {
  width: 6px;
}

.card-content::-webkit-scrollbar-track {
  @apply bg-slate-800 rounded;
}

.card-content::-webkit-scrollbar-thumb {
  @apply bg-slate-600 rounded;
}

.card-content::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-500;
}

/* 卡片悬停效果增强 */
.card-flip-container:hover {
  transform: translateY(-4px);
}

.card-flip-container:hover .card {
  @apply shadow-2xl border-brand-700/50;
}

/* 响应式优化 */
@media (max-width: 768px) {
  .card-flip-container {
    min-height: 360px;
    margin-bottom: 0.75rem;
  }

  .card-flip-inner {
    min-height: 360px;
  }

  .card-flip-face {
    min-height: 360px;
  }
  
  .card-content {
    max-height: 150px;
    font-size: 0.875rem;
  }
  
  .btn {
    @apply text-sm px-3 py-1.5;
  }
}

/* 加载骨架屏 - 卡片版 */
.card-skeleton {
  @apply card animate-pulse;
  min-height: 280px;
}

.card-skeleton-header {
  @apply h-6 w-32 bg-slate-700 rounded mb-4;
}

.card-skeleton-title {
  @apply h-8 w-48 bg-slate-700 rounded mb-3;
}

.card-skeleton-content {
  @apply space-y-2;
}

.card-skeleton-line {
  @apply h-4 bg-slate-700 rounded;
}

.card-skeleton-line:nth-child(1) {
  width: 100%;
}

.card-skeleton-line:nth-child(2) {
  width: 95%;
}

.card-skeleton-line:nth-child(3) {
  width: 85%;
}

.card-skeleton-buttons {
  @apply mt-6 flex gap-2;
}

.card-skeleton-button {
  @apply h-10 flex-1 bg-slate-700 rounded-xl;
}

/* 交错加载动画 */
@keyframes staggerFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stagger-item {
  opacity: 0;
  animation: staggerFadeIn 0.5s ease-out forwards;
}

/* 动态延迟类生成 */
.stagger-item:nth-child(1) { animation-delay: 0ms; }
.stagger-item:nth-child(2) { animation-delay: 80ms; }
.stagger-item:nth-child(3) { animation-delay: 160ms; }
.stagger-item:nth-child(4) { animation-delay: 240ms; }
.stagger-item:nth-child(5) { animation-delay: 320ms; }
.stagger-item:nth-child(6) { animation-delay: 400ms; }
.stagger-item:nth-child(7) { animation-delay: 480ms; }
.stagger-item:nth-child(8) { animation-delay: 560ms; }
.stagger-item:nth-child(9) { animation-delay: 640ms; }
.stagger-item:nth-child(10) { animation-delay: 720ms; }
